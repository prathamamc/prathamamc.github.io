<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bootstrap 4 Website Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  
  <script>
		$(document).ready(function(){
			$(".content .tab_content").hide();
			$(".content .tab_content:first-child").show();

			$("ul li").click(function(){
			  
			  $("ul li").removeClass("active");
			  $(this).addClass("active");
			  
			  var current_tab = $(this).attr("data-list");
			  $(".content .tab_content").hide();
			  $("."+current_tab).show();
			})
		});
	</script>
  <script>
    var gpr=[0,0,0,0,0,0,0,0],ram=[],count=-1,z=0,flg=0,flg_s=0,cmp_flag=0,label=[],cnt=0;//count=-1,z=0;
    var addr_gd,gd_st,errorflag=0,disp,savan=0;
    var labelcount=0;
    var extern=[];
    
    var data=[];
    
    //main nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn
    function mafun(){
       
    var element = document.getElementById("tb1").value;

    var arr= element.split("\n");
    for(var y=0;y<arr.length;y++){
    arr[y]=arr[y].replace(/\s/g, '');
   

    }  

    var imm,val1,val2,op1,op2,cmp_flag,flag,error=0,numb;

    for(z=0;z<arr.length;z++){

    if(errorflag)
    break;
    else{
    imm=0;

    if((arr[z].substring(0,2)=='L:'))

    label[z]=arr[z].substring(2,);
  
      else


  {

//  label[z]=arr[z].substring(2,);
//  continue;
//  cnt=cnt+1;


// data[count-cnt]=arr[count];
    
    if(arr[z].substring(5,6)=="#") //adda,#

    {
    imm=1;  
    var numtxt=(arr[z].substring(6,12)); 
    var in1=arr[z].substring(3,4);
    numb = parseInt(numtxt);

    }
    
    else {
              var in1=arr[z].substring(3,4);
         var in2=arr[z].substring(5,6);

    
   
              switch(in2) {
	                  case 'A':op2=gpr[0];break;

                      case 'B':op2=gpr[1];break;
                      case 'C':op2=gpr[2];break;
                     case 'D':op2=gpr[3];break;
                     case 'E':op2=gpr[4];break;
                     case 'F':op2=gpr[5];break;

                      case 'G':op2=gpr[6];break;
                        case 'H':op2=gpr[7];break;
               default: {if ((arr[z].substring(0,3)=='LDE') || (arr[z].substring(0,3)=='STE')){
        var str1="0x"    ;  

        var str2=(arr[z].substring(10,));
       var numtxt= str1.concat(str2);
              var numb = parseInt(numtxt);
             }
              else if((arr[z].substring(0,3)=='LDR') || (arr[z].substring(0,3)=='STR')){
                var numtxt=(arr[z].substring(5,));
                cnt="hello";
                  var numb = parseInt(numtxt);
                 }

              else
              errorflag==1;
              
    }
    }
    }
    
   if((arr[z].substring(0,1)=='B') ) {
       errorflag=0;


   }else{
    switch(in1) {
          case 'A':op1=gpr[0];break;

        case 'B':op1=gpr[1];break;
        case 'C':op1=gpr[2];break;
        case 'D':op1=gpr[3];break;
        case 'E':op1=gpr[4];break;
        case 'F':op1=gpr[5];break;
        case 'G':op1=gpr[6];break;
        case 'H':op1=gpr[7];break;

        default: errorflag=1;                      
        }

    }
       
    switch(arr[z].substring(0,3)){
    
         case 'ADD':{if(imm==1){
                     op1= immadd(op1,numb);

                     }
                     else
                     {
                     op1 = normadd(op1,op2);

                     } 
                     if(op1>65535)

                     flg=1;
                     
                     document.getElementById("r1").innerHTML=flg;
                    }
                     break;

         case 'CMP':  case 'CMP': {
                      if(op1>op2){
                      cmp_flag="01";
                        flg=1;

                        flg_s=0;
                  }
                    else if(op1<op2){
                    cmp_flag="11";
                    flg=1;
                        flg_s=1;
                  }
                    
                    else {
                    cmp_flag="00";


                    flg=0;
                    flg_s=0;
                  } document.getElementById("r2").innerHTML=flg_s;
                  document.getElementById("r1").innerHTML=flg;
                    document.getElementById("r3").innerHTML=cmp_flag;
                     }
                     break;
                     

         case 'CMZ':{
          if(op1>0){ cmp_flag="01";
                        flg=1;
                        flg_s=0;
                    
                  }
                    else if(op1<0){
                      cmp_flag="11";
                    flg=1;

                        flg_s=1;}
                    else{
                      cmp_flag="00";

                      flg=0;

                      flg_s=0;
                  } document.getElementById("r2").innerHTML=flg_s;
                  document.getElementById("r1").innerHTML=flg;
                    document.getElementById("r3").innerHTML=cmp_flag;

                    }
                    break;
                    
                    break;
         case 'LDR': op1=ram[numb];
                    break;
           case 'STR':ram[numb]=op1;
                    break;
                    case 'LDE': {var op=extern[numb];
                  
                  var str1="0x"    ;  
              var numtxt= str1.concat(op);
           op1 = parseInt(numtxt);
                  }

                break;
	   case 'STE':extern[numb]=op1.toString(16);
                break;
     case 'BRN':{z=label.indexOf(arr[z].substring(3,));}
                break;
      case 'BCS':{
                          if(flg==1)
                          z=label.indexOf(arr[z].substring(3,));
                          errorflag=0;

                         
                        }
                        break;
            case 'BZS':{
                          if(flg_S==0)

                          z=label.indexOf(arr[z].substring(3,));
                          errorflag=0;
                        }
                        break;

            case 'BNC':{
                          if(flg==0)
                          z=label.indexOf(arr[z].substring(3,));
                         flg=0;
                         errorflag=0;
                        }
                        break;
              case 'BNZ':{
                          if(flg_s==0)
                          z=label.indexOf(arr[z].substring(3,));

                         flg_s=0;
                         errorflag=0;
                        }
                        break;         
                                             
         case 'XOR':{
                    op1 = exorf(op1,op2);
                    }    
                    break;
         case 'MOV':if(imm==1){
                    op1 = numb;
                    }
                     else

                    {
                     op1=op2;
                    }
                     break;
                     

        case 'MUL': if(imm==1){
                     op1 = immmul(op1,numb);
                     }
                     else

                     {
                     op1 = normmul(op1,op2);
                     }
                     break;
             
        case 'NND':{
                   op1 = nandf(op1,op2);
                     }
                     break;
                            
          case 'NOR':{
                     op1 = norf(op1,op2);
                     }
                     break;

                            
          case 'NOT':{
                     op1 = notf(op1);
                     }
                     break;
                                  
          case 'SUB':if(imm==1){
                     op1 = immsub(op1,numb);
                     }

                     else
                     {
                     op1 = normsub(op1,op2);
                     }
                     if(op1<=0){flg_s=1

                     
                     }
                     document.getElementById("r2").innerHTML=flg_s;
                     break;

          default:  errorflag=1;
                   
                   }
        switch(in1) {
        case 'A':gpr[0]=op1;break;
        case 'B':gpr[1]=op1;break;
        case 'C':gpr[2]=op1;break;
        case 'D':gpr[3]=op1;break;
        case 'E':gpr[4]=op1;break;
        case 'F':gpr[5]=op1;break;

        case 'G':gpr[6]=op1;break;
        case 'H':gpr[7]=op1;break;
        default: errorflag=1;                      
        }
    
        
  
    if(errorflag==0){ document.getElementById("tb3").value="EXECUTED SUCCESSFULLY";
	machine();

	document.getElementById("tb3").innerHTML=disp;

    //  if(savan==1){
       
      // savan++;}

      }
    // document.getElementById("tb3").value=dat;
    else {
    document.getElementById("tb3").value="ERROR!";
}


    
    document.getElementById("r4").innerHTML=errorflag;

    document.getElementById("row1").innerHTML=gpr[0];
   document.getElementById("row2").innerHTML=gpr[1]; 
   document.getElementById("row3").innerHTML=gpr[2]; 
   document.getElementById("row4").innerHTML=gpr[3]; 
   document.getElementById("row5").innerHTML=gpr[4];
   document.getElementById("row6").innerHTML=gpr[5]; 
   document.getElementById("row7").innerHTML=gpr[6]; 
   document.getElementById("row8").innerHTML=gpr[7];
   //externnn
   document.getElementById("c1").innerHTML=extern[15];
   document.getElementById("c2").innerHTML=extern[14];
   document.getElementById("c3").innerHTML=extern[13];
   document.getElementById("c4").innerHTML=extern[12];
   document.getElementById("c5").innerHTML=extern[11];

   document.getElementById("c6").innerHTML=extern[8];
   document.getElementById("c7").innerHTML=extern[7];
   document.getElementById("c8").innerHTML=extern[6];
   document.getElementById("c9").innerHTML=extern[5];
   document.getElementById("c10").innerHTML=extern[4];

    }

} 
    }
    for(var x=0;x<arr.length;x++){

    if(arr[x].substring(0,1)=='B'){
    
    data[x]=arr[x].substring(0,3)+(label.indexOf(arr[x].substring(3,))-labelcount);
    labelcount++;

  }
  else
  data[x]=arr[x];
}

    }

// document.getElementById("tb3").value=data;
    
  
    
    
    function normadd(op1,op2)
    {

    return op1+op2;
    }
    function immadd(op1,numb)
    {
    return op1+numb;
    }
    
    
    function normmul(op1,op2)

    {
    return op1*op2;
    }
    function immmul(op1,numb)
    {

    return op1*numb;
    }
    
    function normsub(op1,op2)

    {
    op1=op1-op2;
    return op1;
    }
    function immsub(op1,numb)
    {
    op1=op1-numb;
    return op1;
    }
    function exorf(op1,op2)
    {
    op1=op1^op2;
    return op1;
    }
    
    function nandf(op1,op2)
    {
    op1=~(op1&op2);
    return op1;
    }
    
    function norf(op1,op2)
    {

    op1=~(op1|op2);
    return op1;
    }
    
    function notf(op1)

    {
    return ~(op1);
    }
    //debugggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggg
    function debug(){
       
       var element = document.getElementById("tb1").value;
       var arr= element.split("\n");
       label:{if (count<arr.length-1){
       count=count+1;}
       else{
       init();
       break label;
       }}
       
       for(var y=0;y<arr.length;y++){
    arr[y]=arr[y].replace(/\s/g, '');
    if(arr[y].substring(0,1)=='B'){

    
    data[y]=arr[y].substring(0,3)+(label.indexOf(arr[y].substring(3,))-labelcount);
    labelcount++;
  }
  else

  data[y]=arr[y];
}
   
     





       arr[count]=arr[count].replace(/\s/g, '');

       var imm,val1,val2,op1,op2,cmp_flag,flag,error=0,labelerror=0,numb,cnt=0;

       imm=0;
       if(arr[count].substring(0,2)=='L:')
   {
    label[count]=arr[count].substring(2,);
    cnt=cnt+1;
    document.getElementById("tb3").value=arr[count];
   }
   else {
   // data[count-cnt]=arr[count];
   
       // highlight('arr[count]');
       if(arr[count].substring(5,6)=="#") //adda,#
       {

       imm=1;  
       var numtxt=(arr[count].substring(6,12)); 
       var in1=arr[count].substring(3,4);
       numb = parseInt(numtxt);
       }
       
       else {
       var in1=arr[count].substring(3,4);
       var in2=arr[count].substring(5,6);
       
       
       switch(in2) {
       case 'A':op2=gpr[0];break;
       case 'B':op2=gpr[1];break;

       case 'C':op2=gpr[2];break;
       case 'D':op2=gpr[3];break;
       case 'E':op2=gpr[4];break;
       case 'F':op2=gpr[5];break;

       case 'G':op2=gpr[6];break;
       case 'H':op2=gpr[7];break;
       default: {if ((arr[count].substring(0,3)=='LDE') || (arr[count].substring(0,3)=='STE')){
           var str1="0x"    ;  
           var str2=(arr[count].substring(10,));

          var numtxt= str1.concat(str2);
                 var numb = parseInt(numtxt);
                }
                 else if((arr[count].substring(0,3)=='LDR') || (arr[count].substring(0,3)=='STR')){
                   var numtxt=(arr[count].substring(5,));
                     var numb = parseInt(numtxt);
                    }
   
                 else
                 
                 errorflag==1;
                 
       }
       }

       }
       
      
       switch(in1) {
           case 'A':op1=gpr[0];break;
           case 'B':op1=gpr[1];break;
           case 'C':op1=gpr[2];break;
           case 'D':op1=gpr[3];break;
           case 'E':op1=gpr[4];break;

           case 'F':op1=gpr[5];break;
           case 'G':op1=gpr[6];break;
           case 'H':op1=gpr[7];break;
           default: errorflag=1;                      

           }
               
          
       switch(arr[count].substring(0,3)){
       

            case 'ADD':if(imm==1){
                        op1= immadd(op1,numb);
                        if(op1>65535)
                        flg=1;
                        
                        document.getElementById("r1").innerHTML=flg;
                        }
                        else
                        {
                        op1 = normadd(op1,op2);
                        } 
                        break;
                        case 'CMP': {
                         if(op1>op2){

                         cmp_flag="00";
                           flg=0;
                           flg_s=0;
                     }

                       else if(op1<op2){
                       cmp_flag="10";
                       flg=1;
                           flg_s=0;
                     }

                       
                       else {
                       cmp_flag="01";
   

                       flg=0;

                       flg_s=1;
                     } document.getElementById("r2").innerHTML=flg_s;
                     document.getElementById("r1").innerHTML=flg;
                       document.getElementById("r3").innerHTML=cmp_flag;
                        }
                        break;
                        
            case 'CMZ':{
                         if(op1>0){ 

                               cmp_flag="01";
                             flg=1;
                              flg_s=0;
                       
                               }
                       else if(op1<0){
                            cmp_flag="11";
                              flg=1;
                            flg_s=1;}
                       else{
                         cmp_flag="00";
                          flg=0;
                         flg_s=0;

                     } 
                     document.getElementById("r2").innerHTML=flg_s;
                     document.getElementById("r1").innerHTML=flg;
                       document.getElementById("r3").innerHTML=cmp_flag;
                       }

                       break;
            case 'LDR': op1=ram[numb];
                       break;
              case 'STR':ram[numb]=op1;

                       break;
                       case 'LDE': {var op=extern[numb];
                     
                       var str1="0x"    ;  
                   var numtxt= str1.concat(op);
                op1 = parseInt(numtxt);
                       }
                       break;
              case 'STE':extern[numb]=op1.toString(16);
                       break;  
               case 'BRN':{errorflag=0;
                           count=label.indexOf(arr[count].substring(3,));}
               case 'BCS':{errorflag=0;
                             if(flg==1){if(label.indexOf(arr[count].substring(3,))!=-1){

                             count=label.indexOf(arr[count].substring(3,));
                             flg=0;
                             }
                             else labelerror=1;
                             }
                           }
                           break;
               case 'BZS':{errorflag=0;
                             if(flg_S==1){if(label.indexOf(arr[count].substring(3,))!=-1){

                             count=label.indexOf(arr[count].substring(3,));
                             flg_s=0;}
                             else labelerror=1;
                            
                           }

                       }
                           break;
               case 'BNC':{errorflag=0;
                             if(flg==0){if(label.indexOf(arr[count].substring(3,))!=-1){
                             count=label.indexOf(arr[count].substring(3,));

                            flg=0;
                             }
                            else labelerror =1;
                           }
                       }
                           break;
                 case 'BNZ':{errorflag=0;
                             if(flg_s==0){if(label.indexOf(arr[count].substring(3,))!=-1){
                             count=label.indexOf(arr[count].substring(3,));
                            flg_s=0;
                             }

                             else labelerror=1;
                           }
                           }
                           break;                      
            case 'XOR':{
                       op1 = exorf(op1,op2);
                       }    

                       break;
            case 'MOV':if(imm==1){
                       op1 = numb;
                       }

                        else
                       {
                        op1=op2;
                       }
                        break;

                        
           case 'MUL': if(imm==1){
                        op1 = immmul(op1,numb);
                        }
                        else
                        {
                        op1 = normmul(op1,op2);
                        }
                        break;

                
           case 'NND':{
                      op1 = nandf(op1,op2);
                        }
                        break;
                               
             case 'NOR':{
                        op1 = norf(op1,op2);
                        }
                        break;
                               
             case 'NOT':{
                        op1 = notf(op1);
                        }

                        break;
                                     
             case 'SUB':if(imm==1){
                        op1 = immsub(op1,numb);
                        }

                        else
                        {
                        op1 = normsub(op1,op2);
                        }

                        if(op1<=0){flg_s=1
                        
                        } 
                        document.getElementById("r2").innerHTML=flg_s;
                        break;

             default:  errorflag=1;
                      
                      }
           switch(in1) {
             case 'A':gpr[0]=op1;break;
           case 'B':gpr[1]=op1;break;
           case 'C':gpr[2]=op1;break;
           case 'D':gpr[3]=op1;break;
           case 'E':gpr[4]=op1;break;
           case 'F':gpr[5]=op1;break;
           case 'G':gpr[6]=op1;break;
           case 'H':gpr[7]=op1;break;
           }
           // machine();
           // document.getElementById("tb3").innerHTML=data[count];
          
          if (labelerror==1) document.getElementById("tb3").value="label "+arr[count].substring(3,)+" not found!";
          else if (errorflag==1) document.getElementById("tb3").value="syntax error at line "+(count+1);

          else document.getElementById("tb3").value=arr[count];


        
       document.getElementById("row1").innerHTML=gpr[0];
      document.getElementById("row2").innerHTML=gpr[1]; 
      document.getElementById("row3").innerHTML=gpr[2]; 
      document.getElementById("row4").innerHTML=gpr[3]; 
      document.getElementById("row5").innerHTML=gpr[4];

      document.getElementById("row6").innerHTML=gpr[5]; 
      document.getElementById("row7").innerHTML=gpr[6]; 
      document.getElementById("row8").innerHTML=gpr[7];
   
      document.getElementById("r4").innerHTML=errorflag;

   //externnn
       document.getElementById("c1").innerHTML=extern[15];
      document.getElementById("c2").innerHTML=extern[14];
      document.getElementById("c3").innerHTML=extern[13];
      document.getElementById("c4").innerHTML=extern[12];
      document.getElementById("c5").innerHTML=extern[11];

      document.getElementById("c6").innerHTML=extern[8];
      document.getElementById("c7").innerHTML=extern[7];
      document.getElementById("c8").innerHTML=extern[6];
      document.getElementById("c9").innerHTML=extern[5];
      document.getElementById("c10").innerHTML=extern[4];
   
      
   
   
       }
       //if(errorflag==0){
        //savan++; 
        //if(savan==1){
       machine();
   document.getElementById("tb2").value=disp;
   //}}
 

       }



var disp;


function machine(){
  

  var ins=[],bit_3,bit_31,bit_num,mac_code,dec,hex;
  var i=0,j=0,x=0,a=[],value;
  // var element="MOVA,#10 ADDB,A CMPA,B CMZA LDRA,5555 LDEB,0XFFFF MULA,B";
  // var data=element.split(" ");     //split into individual instructions
  for(i=0;i<data.length;i++)       //loop for travelling through each -individual instructions 

      {
          ins=data[i];             // the variable 'ins' gets one instruction 
          switch (ins[0])          //to check the first character the instruction stored in variable 'ins'
          {
              case "A":
                  a[x]=add(ins);    //go to add function if first character is A and return the resulting binary code to array a[x] 
                  x++;
              break;
              case "C":
                  a[x]=cmp_z(ins);   //go to compare function if first character is C and return the resulting binary code to array a[x] 
                  x++; 
              break;
              case "M":
                  a[x]=mov_mul(ins);   //go to multiply function if first character is M and return the resulting binary code to array a[x] 
                  x++;
              break;
              case "N":
                  a[x]=nnd_nor_not(ins);   //go to nand/nor/not function if first character is N and return the resulting binary code to array a[x] 

                  x++;
              break;
              case "S":
                  a[x]=sub_str_ste(ins);   //go to sub/store/store(external) function if first character is S and return the resulting binary code to array a[x] 

                  x++;
              break;
              case "B":
                        a[x]=branch(ins.substring(0,3));

                        x++;
                        break;
              case "X":                          //EXOR operation if first character is X
                  //000000000011110110           //18 bit xor machine code
                  bit_3=register(ins[3]);        // this function takes character A|B|C|D|E|F|G|H and returns the equivalent binary code       
                  bit_31=register(ins[5]);       // gives the equivalent binary code of second character A|B|C|D|E|F|G|H
                  //00000000      //8 bit zeros
                  mac_code="000000000011110110"+bit_3+bit_31+"00000000";   //32 BIT MACHINE CODE
                  a[x]=mac_code;                                           //machine code is stored in the array a

                  x++;                                                    //increment array 
              break;
              case "L":                                                   //if first character is L then check third character
                  if(ins[2]=='R')                                         //if third character is R then load operation
                  {

                      //00000000001100                                      //14 bit ldr machine code
                      bit_3=register(ins[3]);                               //returns 3 bit boinary code of tghe character
                      if((ins[6]=='x')|(ins[6]=='X'))                       //check if the given data is hexadecimal or decimal by comparing the sisth character
                      {

                       bit_num=hex2binLS(ins.substring(5,));  //function to convert hexadecimal to binary
                      }
                      else
                      {

                       bit_num=dec2binLS(ins.substring(5,));  //function to convert decimal to binary
                      }
                      mac_code="00000000001100"+bit_3+bit_num;  //32 BIT MACHINE CODE
                      a[x]=mac_code;
                      x++;                                      //increment array

                  }
                  else if(ins[2]=='E')   //if third character is E then load(external) operation
                  {
                      //00000000011100    //14 bit ldr machine code

                      bit_3=register(ins[3]);             //3 bit binary code of the chareacter
                      if((ins[6]=='x')|(ins[6]=='X'))      //to check if the number is decimal or hexadecimal
                      {
                       bit_num=hex2binLS(ins.substring(5,));  //function to convert hexadecimal to binary
                      }

                      else
                      {
                       bit_num=dec2binLS(ins.substring(5,));   //function to convert decimal to binary
                      }
                      mac_code="00000000011100"+bit_3+bit_num;  //32 BIT MACHINE CODE
                      a[x]=mac_code;                            //store the machine code in the array

                      x++;                                      //increment array
                  }
              break;

              default:
                 errorflag=1;
                  break;
          }
      }
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////            
      // below is the code to split the array into 16 bits and send to the downloadable file
      var m_c=[][2];
   
      var xxx=0;
      for(i=0;i<(a.length);i++)
      {
          var m_c=[[a[i].substring(0,16),a[i].substring(16,)]];
          disp += "ROM["+xxx+"]"+"="+"16'b"+m_c[0][0]+";"+"\n" + "ROM["+(xxx+1)+"]"+"="+"16'b"+m_c[0][1]+";"+"\n";

          xxx=xxx+2;
          if(xxx>=(a.length)*2)
          {
              break;

          }
      }
      disp += "";
     // document.getElementById("tb2").innerHTML= disp;
      document.getElementById("dwn-btn").addEventListener("click", function(){

var text = document.getElementById("tb2").value;
var filename = "Binarycode.txt";

download(filename, text);}, false);


}
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////        
var disp = "";
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//function to download tghe file which contains the machine codes
function download(filename, text) {
var disp = document.createElement('a');



disp.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
disp.setAttribute('download', filename);

disp.style.display = 'none';
document.body.appendChild(disp);

disp.click();


document.body.removeChild(disp);
}

// Start file download.

//option for downdoading thr file should be enabled after the conversion of all instructions to binay code is completed
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
function dec2binBRANCH(dec)
{


  var aa= (dec >>> 0).toString(2);
  return pad(aa, 12);
  function pad(n, width) 
 {

  n = n + '';
  return n.length >= width ? n : 
  new Array(width - n.length + 1).join('0') + n;
 }
}

function branch(val)
                {
switch (val)          //to check the first character the instruction stored in variable 'ins'
                {
                    case "BRN":
                        {
                         bit_num=dec2binBRANCH(ins.substring(3,));
                         mac_code="00000000001110000"+bit_num+"000";
                         return mac_code;
                        }
                    break;
                    case "BZS":
                        {
                         bit_num=dec2binBRANCH(3,);
                         mac_code="00000000001110001"+bit_num+"000";
                         return mac_code;
                        }

                    break;
                    case "BNZ":
                       {
                         bit_num=dec2binBRANCH(3,);
                         mac_code="00000000001110010"+bit_num+"000";

                         return mac_code;
                        }
                    break;
                    case "BRC":

                       {
                         bit_num=dec2binBRANCH(3,);
                         mac_code="00000000001110011"+bit_num+"000";
                         return mac_code;
                        }

                    break;
                    case "BNC":
                       {
                         bit_num=dec2binBRANCH(3,);
                         mac_code="00000000001110100"+bit_num+"000";
                         return mac_code;
                        }
                    break;
                    case "BSP":

                       {
                         bit_num=dec2binBRANCH(3,);
                         mac_code="00000000001110101"+bit_num+"000";
                         return mac_code;

                        }
                    break;
                    default:
                        disp = "error!!!!!";
                        break;
                }
            }
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// function for add operation
function add(ins)

{

if (ins[5]=='#')                                 // check whether its immidiate operation by checking the fifth charcter of the instruction stored in variable 'ins'
  {

      // 0000000000000                         // first 13 bits
      bit_3=register(ins[3]);                  // get 3 bit binary code the the character 
      if((ins[7]=='x')|(ins[7]=='X'))          //chech whethewr the numbwr is hexadecimal or decimal ,,if it is decimal then go to ELSE part of thre IF ELSE lopp
      {
      bit_num=hex2bin(ins.substring(6,));      //function to convert hexadecimal to binary
      }
      else
      {

      bit_num=dec2bin(ins.substring(6,));       //function to conmvert decimal to binary
      } 
      mac_code="0000000000000"+bit_3+bit_num;   //32  BIT MACHINE CODE
      return mac_code;
  }
else if((ins[5]=="A")|(ins[5]=="B")|(ins[5]=="C")|(ins[5]=="D")|(ins[5]=="E")|(ins[5]=="F")|(ins[5]=="G")|(ins[5]=="H"))
  {
      //000000000011110000  // first 18 bits
      bit_3=register(ins[3]);     //3 bits
      bit_31=register(ins[5]);    //3 bits
      //00000000 // last 8 bits //it needs updating
      mac_code="000000000011110000"+bit_3+bit_31+"00000000"; //machine code
      return mac_code;
  }
}
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//function to return the equivalent 3 bit binary code of each character..(A|B|C|D|E|F|G|H)
function register(value)
{
switch(value)

{
  case 'A': return '000';	break;      
  case 'B': return '001';	break;
  case 'C': return '010';	break;

  case 'D': return '011';	break;
  case 'E': return '100';	break;
  case 'F': return '101';	break;
  case 'G': return '110';	break;
  case 'H': return '111';	break;
  default: break;
}
}

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//function to convert decimal to binary
function dec2bin(dec)
{

var aa= (dec >>> 0).toString(2);
return pad(aa, 16);
function pad(n, width) 
{
n = n + '';

return n.length >= width ? n : 
new Array(width - n.length + 1).join('0') + n;
}
}

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//function to convert decimal to binary for load store operations(15 bits)
function dec2binLS(dec)
{


var aa= (dec >>> 0).toString(2);
return pad(aa, 15);
function pad(n, width) 
{

n = n + '';
return n.length >= width ? n : 
new Array(width - n.length + 1).join('0') + n;
}
}

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//function to convert hexadecimal to binary
function hex2bin(hex)

{
return ("0000000000000000" + (parseInt(hex, 16)).toString(2)).substr(-16);
}

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//function to convert hexadecimal to binary for load store(15 bits)
function hex2binLS(hex)
{
return ("000000000000000" + (parseInt(hex, 16)).toString(2)).substr(-15);
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//function for compare operation
function cmp_z(ins)
{
if (ins[2]=='Z')                                   //compare with zero
  {
      // 000000000011111010                      // first 18 bits

      bit_3=register(ins[3]);                    //3bits 
      //00000000                                 //8 bits 
      mac_code="000000000011111010"+bit_3+"00000000000";
      return mac_code;
  }

else if(ins[2]=="P")                                   //compare non zero 
  { 
      //000000000011111000                           // first 18 bits
      bit_3=register(ins[3]);                        //3 bits

      bit_31=register(ins[5]);                       //3 bits
      //00000000                                     // last 8 bits //it needs updating
      mac_code="000000000011111000"+bit_3+bit_31+"00000000";
      return mac_code;
  }
}


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//function for move and multiplication operations
function mov_mul(ins)
{
if (ins[1]=='O')     //if first character is 'O' thrn move operation
  {
      if (ins[5]=='#')
      {
              // 0000000000101                // first 13 bits
              bit_3=register(ins[3]);          //3bits 
              if((ins[7]=='x')|(ins[7]=='X'))

              {
              bit_num=hex2bin(ins.substring(6,));
              }
              else

              {
              bit_num=dec2bin(ins.substring(6,));
              }
              mac_code="0000000000101"+bit_3+bit_num;
              return mac_code;

      }
      else if((ins[5]=="A")|(ins[5]=="B")|(ins[5]=="C")|(ins[5]=="D")|(ins[5]=="E")|(ins[5]=="F")|(ins[5]=="G")|(ins[5]=="H"))
      {
              //0000000000100  // first 13 bits
              bit_3=register(ins[3]);        //3 bits
              bit_31=register(ins[5]);       //3 bits
              //0000000000000 // last 13 bits //it needs updating
              mac_code="0000000000100"+bit_3+bit_31+"0000000000000";
              return mac_code; 

      }
  }
else if(ins[1]=='U') //if first operation is 'U' then multiplication operations
  {
      if (ins[5]=='#')          //checkwhethwe immidiate operation 
      {
              // 0000000000010  // first 13 bits
              bit_3=register(ins[3]);            //3bits 
              if((ins[7]=='x')|(ins[7]=='X'))     //check if hexadecimal
              {
              bit_num=hex2bin(ins.substring(6,));   //hexa to binary
              }
              else
              {

              bit_num=dec2bin(ins.substring(6,));   //decimal to binary
              }
              mac_code="0000000000010"+bit_3+bit_num;
              return mac_code;
      }

      else if((ins[5]=="A")|(ins[5]=="B")|(ins[5]=="C")|(ins[5]=="D")|(ins[5]=="E")|(ins[5]=="F")|(ins[5]=="G")|(ins[5]=="H"))
      {
              //000000000011110010  // first 18 bits
              bit_3=register(ins[3]);        //3 bits

              bit_31=register(ins[5]);       //3 bits
              //00000000 // last 8 bits //it needs updating
              mac_code="000000000011110010"+bit_3+bit_31+"00000000";
              return mac_code; 
      } 
  }
}
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//function for nand nor and not operation
function nnd_nor_not(ins)
{

if (ins[2]=='D')    // if thr second character is D then nand operation
{
  //000000000011110100        //18 bit nand machine code
  bit_3=register(ins[3]);     //3 bit 
  bit_31=register(ins[5]);    //3 bit
  //00000000      //8 bit last no.'s
  mac_code="000000000011110100"+bit_3+bit_31+"00000000";
  return mac_code; 
}
else if(ins[2]=='R')  //if character is R then nor operation
{
  //000000000011110101        //18 bit nand machine code
  bit_3=register(ins[3]);     //3 bit 

  bit_31=register(ins[5]);    //3 bit

  //00000000      //8 bit last no.'s
  mac_code="000000000011110101"+bit_3+bit_31+"00000000";
  return mac_code; 
}

else if(ins[2]=='T')  //if character is T themn not opertaion
{
  //000000000011110111        //18 bit nand machine code
  bit_3=register(ins[3]);     //3 bit 
  //00000000000      //11 bit last no.'s

  mac_code="000000000011110111"+bit_3+"00000000000";
  return mac_code; 
}
}
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//function for subtraction store and store(external) operations
function sub_str_ste(ins)
{
if (ins[2]=='B')       //if second character is B then subtraction opereation
{
  if (ins[5]=='#')    // if # then immediate operation

  {
      // 0000000000001  // first 13 bits
      bit_3=register(ins[3]);            //3bits 
      if((ins[7]=='x')|(ins[7]=='X'))    // check if number is hexadecimal or decimal

      {
       bit_num=hex2bin(ins.substring(6,));
      }
      else
      {

       bit_num=dec2bin(ins.substring(6,));
      }
      mac_code="0000000000001"+bit_3+bit_num;
      return mac_code; 

  }
  else if((ins[5]=="A")|(ins[5]=="B")|(ins[5]=="C")|(ins[5]=="D")|(ins[5]=="E")|(ins[5]=="F")|(ins[5]=="G")|(ins[5]=="H"))
  {
      //000000000011110001  // first 18 bits
      bit_3=register(ins[3]);     //3 bits
      bit_31=register(ins[5]);    //3 bits
      //00000000 // last 8 bits //it needs updating
      mac_code="000000000011110001"+bit_3+bit_31+"00000000";
      return mac_code;
  }
}
else if (ins[2]=='R')  //if character is R then store operation
{
  //00000000001101    //14 bit machine code for str

  bit_3=register(ins[3]);            //3bits
      if((ins[6]=='x')|(ins[6]=='X'))
      {
       bit_num=hex2binLS(ins.substring(5,));
      }

      else
      {
       bit_num=dec2binLS(ins.substring(5,));
      }

  mac_code="00000000001101"+bit_3+bit_num;
  return mac_code;
}
else if (ins[2]=='E') //if character is E then store(external) operation
{
  //00000000011101    //14 bit machine code for str
  bit_3=register(ins[3]);            //3bits
  if((ins[6]=='x')|(ins[6]=='X'))
      {
       bit_num=hex2binLS(ins.substring(5,));

      }
      else
      {
       bit_num=dec2binLS(ins.substring(5,));
      }
  mac_code="00000000011101"+bit_3+bit_num;
  return mac_code;
}
}

function init(){
   	 flg=0,flg_s=0,cmp_flag=0;
  	 gpr=[0,0,0,0,0,0,0,0];

  		count=-1;
 		 z=0;
		errorflag=0;

  		for(let j=0;j<30;j++){

  			extern[j]=0;}
  /*for(i=0;i<cou;i++){
  if (isNaN(ram[i])==false){
  ram[i]=0;*/


  			for(i=0;i<(2**14);i++){
 			 ram[i] = 0; }

  			document.getElementById("tb3").value="";

  			document.getElementById("tb2").value="";
  			disp="";
  
  
  
  			document.getElementById("r1").innerHTML=flg;
  			document.getElementById("r2").innerHTML=flg_s;
  			document.getElementById("r3").innerHTML=cmp_flag;
  			document.getElementById("r4").innerHTML=errorflag;
  			document.getElementById("row1").innerHTML=gpr[0];
 			document.getElementById("row2").innerHTML=gpr[1]; 
 			document.getElementById("row3").innerHTML=gpr[2]; 
 			document.getElementById("row4").innerHTML=gpr[3]; 
			document.getElementById("row5").innerHTML=gpr[4];
 			document.getElementById("row6").innerHTML=gpr[5]; 
 			document.getElementById("row7").innerHTML=gpr[6]; 
 			document.getElementById("row8").innerHTML=gpr[7];


//externnn

			document.getElementById("c1").innerHTML=extern[15];
			document.getElementById("c2").innerHTML=extern[14];
			document.getElementById("c3").innerHTML=extern[13];
			document.getElementById("c4").innerHTML=extern[12];
			document.getElementById("c5").innerHTML=extern[11];

			document.getElementById("c6").innerHTML=extern[0];
			document.getElementById("c7").innerHTML=extern[1];
			document.getElementById("c8").innerHTML=extern[3];
			document.getElementById("c9").innerHTML=extern[2];
			document.getElementById("c10").innerHTML=extern[4];



 		}
 
 
function sear()
{ 
   gd_st=document.getElementById("search_id").value

   addr_gd=parseFloat(gd_st);
//  for(let u=addr_gd;u<addr_gd+100;u++)
/* document.getElementById("tb2").value=addr_gd;
  document.getElementById("ro1").innerHTML=ram.slice(addr_gd,addr_gd+30);  
  document.getElementById("ro2").innerHTML=ram.slice(addr_gd+31,addr_gd+61);  

  document.getElementById("ro3").innerHTML=ram.slice(addr_gd+61,addr_gd+91);*/

  displayRAMinfo(parseInt(gd_st));
  

}


function displayRAMinfo(address)
{


    let k = ram.length;
    console.log("The length of Ram is " + ram.length);



   var disp = "";

   disp += "<table class=\"table table-hover\">";
   max_col = address+60;
   for(i=address;i<max_col;i=i+15)
   {
   disp += "<tr>";
   disp += "<th> "+i + "</th>" ;
   for(k=0;k<=14;k++)

   disp += "<td>" + ram[i+k] + "</td>";
   }
   disp += "</table>";
   document.getElementById("ram1").innerHTML = disp;

}


    </script>	
	
	
  <style>
  .fakeimg {
    height: 200px;
    background: #aaa;
  }
  </style>
</head>
<body onload="init()">
	<nav class="navbar navbar-expand-sm bg-dark navbar-dark">
 		 <a class="navbar-brand" href="#">Prathama</a>
 		 <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
    			<span class="navbar-toggler-icon"></span>
 		 </button>
  		<div class="collapse navbar-collapse" id="collapsibleNavbar">
    			<ul class="navbar-nav">
      				<li class="nav-item">
        				<a class="nav-link" href="index.html">Home</a>
      				</li>
      				<li class="nav-item">
       			 	<a class="nav-link" href="aboutus.html">About Us</a>
      				</li>
     				 <li class="nav-item">
       				 <a class="nav-link" href="contactus.html">Contact Us</a>
      				</li>    
    			</ul>
 		 </div>  
	</nav>

	<div class="container-fluid" style="margin-top:10px">
  		<div class="row">
    			<div class="col-sm-4">
     				<div class="form-group">
  					<label for="comment">Code:</label>
  					<textarea class="form-control" rows="8" id="tb1"></textarea>
				</div> 
 			</div>
    
	
	 		<div class="col-sm-8">
      				<ul class="nav nav-tabs nav-pills nav-fill">
  					<li class="nav-item">
    						<a class="nav-link active" data-toggle="tab" href="#gpr">GPR</a>
  					</li>
 					 <li class="nav-item">
  						  <a class="nav-link" data-toggle="tab" href="#ram">RAM</a>
  					</li>
  					<li class="nav-item">
   						 <a class="nav-link" data-toggle="tab" href="#peripheral">PERIPHERAL</a>
  					</li>
  					<li class="nav-item">
  						  <a class="nav-link" data-toggle="tab" href="#flag">FLAG</a>
 					 </li>
				</ul>
				<div class="tab-content">
   					 <div id="gpr" class="container tab-pane active"><br>
	
						<table class="table table-hover table-bordered">
       					 <thead>
       						 <tr>
           							 <th>A</th>
           							 <th>B</th>
           							 <th>C</th>
          							 <th>D</th>
           							 <th>E</th>
            							 <th>F</th>
         							 <th>G</th>
            							 <th>H</th>
        						</tr>
       					 </thead>
							<tr>
            							<td id="row1"> </td>
           							<td id="row2"> </td>
            							<td id ="row3"> </td>
             							<td id ="row4"> </td>
            							<td id="row5"> </td>
           							<td id="row6"> </td>
            							<td id ="row7"> </td>
             							<td id ="row8"> </td>
        						</tr>
						</table>
       				</div>
    					<div id="ram" class="container tab-pane fade"><br>
       					<form class="form-inline" action="#">
    							<input class="form-control mr-sm-2" type="text" placeholder="Search" id="search_id">
    							<button class="btn btn-success" type="submit" onclick=sear()>Search</button>
	 					 </form>
	 					 <div id="ram1">
	  					 </div>
	  				</div>
    					<div id="peripheral" class="container tab-pane fade"><br>
     						 <table class="table table-hover table-bordered">
      							<thead>
						      		<tr>
								  <th > Pins  </th> 
								  <th>Pinsel 0</th>
								  <th>Pinsel 1</th>
								  <th>Timer val</th>
								  <th>Timer con</th> 
								   <th>THR</th>
								  <th>LSR</th></tr>

								  </tr>
							  </thead>
							  	<tr>
								  <td id="c1"></td>
								  <td id="c2"></td>
								  <td id ="c3"></td>
								  <td id="c4"></td>
								  <td id="c5"></td>
								  <td id="c6"></td>
							      	  <td id="c7"></td>
								  </tr>
							  	  <tr>
							  
								    <th>RBR</th>
								    <th>LCR</th>
								    <th>Interrupt</th>
								  </tr>
							         <tr>
							      
								      <td id ="c8"></td>
								      <td id="c9"></td>
								      <td id="c10"></td>
							         </tr>
							  </table>
    					</div>
					<div id="flag" class="container tab-pane fade"><br>
      							<table class="table table-hover table-bordered">
							     <thead>
								<tr>
								    <th>Carry</th>
								    <th>Zero</th>
								    <th>Comparator</th>
								    <th>Error</th>
								 </tr>
							      </thead>
								  <tr>
								    <td id="r1"></td>
								    <td id="r2"></td>
								    <td id ="r3"></td>
								    <td id ="r4"></td>
								  </tr>
							</table>
   					 </div>
  				</div>

      
   			 </div>
  		</div>
	</div>

 
  
 
  
	<div class="container-fluid" style="margin-top:10px">
 
   		 <div class="form-group" >
  			<label for="comment">Console:</label>
  			<textarea class="form-control" rows="3" id="tb3" readonly></textarea>
      		</div> 

  	</div>
  	<div class="container-fluid" style="margin-bottom:10px">
 
    		<div class="form-group">
  			<label for="tb2">Machine Code:</label>
  			<textarea class="form-control" rows="3" id="tb2" readonly></textarea>
     		 </div> 
	</div>
	<div class="container-fluid" >
  
  		<nav class="navbar navbar-expand-sm bg-dark navbar-dark  justify-content-center fixed-bottom">
  
  			<button type="button" class="btn-info mr-2" onclick="mafun()" >Run</button>
  			<button type="button" class="btn-info mr-2" onclick="debug()">Debug</button>
  			<button type="button" class="btn-danger mr-2" onclick="init()" >Reset</button>
  			<button type="button" class="btn-info mr-2" id="dwn-btn" onclick=" download()">Compile</button>
  		</nav>
	</div>
<div class="container-fluid" style="margin-bottom:70px">
</div>

</body>
</html>
